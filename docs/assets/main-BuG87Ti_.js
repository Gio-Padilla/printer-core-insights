(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();function p(r){return JSON.parse(localStorage.getItem(r))}function h(r,e){localStorage.setItem(r,JSON.stringify(e))}async function g(r){return await(await fetch(r)).text()}function f(r,e){e.innerHTML=r}async function v(){const r=document.querySelector(".header-location"),e=document.querySelector(".footer-location"),t=await g("../partials/header.html");f(t,r);const s=await g("../partials/footer.html");f(s,e),L(),w();const n=new Date().getFullYear(),a=new Date(document.lastModified).toString();document.getElementById("currentYear").textContent=n,document.getElementById("lastModified").textContent=`Last Updated: ${a}`}function w(){const r=document.querySelector(".header-location h1");window.location.pathname.includes("/parts/")?r.textContent="FDM Parts":r.textContent="Home"}function L(){const r=document.querySelector(".header-menu button"),e=document.querySelector(".header-menu nav");r.addEventListener("click",function(){e.classList.toggle("open"),r.classList.toggle("open")})}function y(r,e=1){const t=document.createElement("div");t.classList.add("center-alert"),t.textContent=r,document.body.appendChild(t),requestAnimationFrame(()=>{t.classList.add("visible")}),setTimeout(()=>{t.classList.remove("visible"),t.addEventListener("transitionend",()=>{t.remove()},{once:!0})},e*1e3)}async function E(r,e="add-dictionary"){try{const s=await(await fetch(r)).json(),n=new Map;s.forEach(i=>{n.set(i.term.toLowerCase(),i.description)});const a=s.map(i=>i.term);document.querySelectorAll(`.${e}`).forEach(i=>{T(i,n,a)})}catch(t){console.error("Error loading dictionary:",t)}}function T(r,e,t){let s=r.innerHTML;const n=t.map(o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),a=new RegExp(`\\b(${n.join("|")})\\b`,"gi");s=s.replace(a,o=>{const i=o,d=i.toLowerCase();return e.has(d)?`<span class="dictionary-term" title="${e.get(d)}">${i}</span>`:o}),r.innerHTML=s}class b{async getRedditTopPosts(e="3dprint",t=10,s="week",n=!1){const a=`https://www.reddit.com/r/${e}/top.json?t=${s}&limit=${t}`;try{return(await(await fetch(a)).json()).data.children.map(l=>{const c=l.data;if(c.over_18===!0&&!n)return null;let u=this.extractImage(c);return{id:c.id,fullname:c.name,title:c.title,url:"https://www.reddit.com"+c.permalink,image:u,score:c.score,author:c.author}}).filter(l=>l!==null)}catch(o){return console.error("Error loading Reddit posts:",o),[]}}extractImage(e){var t,s,n,a,o,i,d,l,c;if(e.is_gallery&&e.gallery_data&&e.media_metadata){const m=e.gallery_data.items[0],u=e.media_metadata[m.media_id];if((t=u==null?void 0:u.s)!=null&&t.u)return u.s.u.replace(/&amp;/g,"&")}return(o=(a=(n=(s=e.preview)==null?void 0:s.images)==null?void 0:n[0])==null?void 0:a.source)!=null&&o.url?e.preview.images[0].source.url.replace(/&amp;/g,"&"):((c=(l=(d=(i=e.preview)==null?void 0:i.images)==null?void 0:d[0])==null?void 0:l.resolutions)==null?void 0:c.length)>0?e.preview.images[0].resolutions.slice(-1)[0].url.replace(/&amp;/g,"&"):e.url_overridden_by_dest&&this.isLikelyImage(e.url_overridden_by_dest)?e.url_overridden_by_dest.replace(/&amp;/g,"&"):e.thumbnail&&this.isLikelyImage(e.thumbnail)?e.thumbnail.replace(/&amp;/g,"&"):"/images/noImage.webp"}isLikelyImage(e){return/\.(jpg|jpeg|png|gif|webp)$/i.test(e)}}class C{savePost(e){const t="saved-posts";let s=p(t)||[];s.some(n=>n.id===e.id)?y(`Already saved: ${e.title}`):(s.push(e),h(t,s),y(`Saved: ${e.title}`))}async displayTop10Cards(){const t=await new b().getRedditTopPosts();this.displayCards(t)}displaySavedCards(){const t=p("saved-posts")||[];this.displayCards(t)}displayCards(e,t=document.querySelector(".cards")){if(t.innerHTML="",!e.length){t.innerHTML="<p>No Data to Display</p>";return}e.forEach(s=>{t.appendChild(this.returnCardHTML(s))})}returnCardHTML(e){const t=document.createElement("div");return t.classList.add("card"),t.innerHTML=`
      <img src="${e.image}" alt="Image" width="300">
      <a href="${e.url}" target="_blank">${e.title}</a>
      <div class="reddit-meta">
        üëç ${e.score} ‚Ä¢ by ${e.author}
      </div>
    `,t.querySelector("img").addEventListener("click",()=>{this.savePost(e)}),t}}E("./data/dictionary.json","add-dictionary");v();S();function S(){const r=new C;r.displayTop10Cards();const e=document.querySelector(".card-buttons .saved"),t=document.querySelector(".card-buttons .top-10");e.addEventListener("click",()=>r.displaySavedCards()),t.addEventListener("click",()=>r.displayTop10Cards())}
